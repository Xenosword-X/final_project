{"ast":null,"code":"import modalMixin from '../mixins/modalMixin';\nexport default {\n  props: {\n    order: {\n      type: Object,\n      default() {\n        return {};\n      }\n    }\n  },\n  watch: {\n    order() {\n      this.tempOrder = this.order;\n      this.isPaid = this.tempOrder.isPaid;\n    }\n  },\n  data() {\n    return {\n      status: {},\n      modal: {},\n      tempOrder: {},\n      isPaid: false\n    };\n  },\n  methods: {\n    formatDate(timestamp) {\n      const num = Number(timestamp);\n      if (!num || isNaN(num)) {\n        return '無效時間';\n      }\n      const date = new Date(num * 1000);\n      return date.toISOString().split('T')[0];\n    }\n  },\n  mixins: [modalMixin]\n};","map":{"version":3,"names":["modalMixin","props","order","type","Object","default","watch","tempOrder","isPaid","data","status","modal","methods","formatDate","timestamp","num","Number","isNaN","date","Date","toISOString","split","mixins"],"sources":["C:\\Users\\User\\Documents\\GitHub\\final_project\\src\\components\\OrderModal.vue"],"sourcesContent":["<template>\r\n  <div class=\"modal fade\" id=\"productModal\" tabindex=\"-1\" role=\"dialog\"\r\n       aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" ref=\"modal\">\r\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\r\n      <div class=\"modal-content border-0\">\r\n        <div class=\"modal-header bg-dark text-white\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n            <span>訂單細節</span>\r\n          </h5>\r\n          <button type=\"button\" class=\"btn-close\"\r\n                  data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-4\">\r\n              <h3>用戶資料</h3>\r\n              <table class=\"table\">\r\n                <tbody v-if=\"tempOrder.user\">\r\n                  <tr>\r\n                    <th style=\"width: 100px;\">姓名</th>\r\n                    <td>{{ tempOrder.user.name }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>Email</th>\r\n                    <td>{{ tempOrder.user.email }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>電話</th>\r\n                    <td>{{ tempOrder.user.tel }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>地址</th>\r\n                    <td>{{ tempOrder.user.address }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div class=\"col-md-8\">\r\n              <h3>訂單細節</h3>\r\n              <table class=\"table\">\r\n                <tbody>\r\n                  <tr>\r\n                    <th style=\"width: 100px\">訂單編號</th>\r\n                    <td>{{ tempOrder.id }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>下單時間</th>\r\n                    <td>{{ formatDate(tempOrder.create_at)}}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>付款時間</th>\r\n                    <td>\r\n                      <span v-if=\"tempOrder.paid_date\">\r\n                        {{ formatDate(tempOrder.paid_date) }}\r\n                      </span>\r\n                      <span v-else>時間不正確</span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>付款狀態</th>\r\n                    <td>\r\n                      <strong v-if=\"tempOrder.is_paid\" class=\"text-success\">已付款</strong>\r\n                      <span v-else class=\"text-muted\">尚未付款</span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>總金額</th>\r\n                    <td>\r\n                      {{ $filters.currency(tempOrder.total) }}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n              <h3>選購商品</h3>\r\n              <table class=\"table\">\r\n                <thead>\r\n                  <tr>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"item in tempOrder.products\" :key=\"item.id\">\r\n                    <th>\r\n                      {{ item.product.title }}\r\n                    </th>\r\n                    <td>\r\n                      {{ item.qty }} / {{ item.product.unit }}\r\n                    </td>\r\n                    <td class=\"text-end\">\r\n                      {{ $filters.currency(item.final_total) }}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-outline-secondary\"\r\n                  data-bs-dismiss=\"modal\">取消\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-primary\"\r\n                  @click=\"$emit('update-order', tempOrder)\">確認</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport modalMixin from '../mixins/modalMixin'\r\nexport default {\r\n  props: {\r\n    order: {\r\n      type: Object,\r\n      default () { return {} }\r\n    }\r\n  },\r\n  watch: {\r\n    order () {\r\n      this.tempOrder = this.order\r\n      this.isPaid = this.tempOrder.isPaid\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      status: {},\r\n      modal: {},\r\n      tempOrder: {},\r\n      isPaid: false\r\n    }\r\n  },\r\n  methods: {\r\n    formatDate (timestamp) {\r\n      const num = Number(timestamp)\r\n      if (!num || isNaN(num)) {\r\n        return '無效時間'\r\n      }\r\n      const date = new Date(num * 1000)\r\n      return date.toISOString().split('T')[0]\r\n    }\r\n  },\r\n  mixins: [modalMixin]\r\n}\r\n</script>\r\n"],"mappings":"AA6GA,OAAOA,UAAS,MAAO,sBAAqB;AAC5C,eAAe;EACbC,KAAK,EAAE;IACLC,KAAK,EAAE;MACLC,IAAI,EAAEC,MAAM;MACZC,OAAMA,CAAA,EAAK;QAAE,OAAO,CAAC;MAAE;IACzB;EACF,CAAC;EACDC,KAAK,EAAE;IACLJ,KAAIA,CAAA,EAAK;MACP,IAAI,CAACK,SAAQ,GAAI,IAAI,CAACL,KAAI;MAC1B,IAAI,CAACM,MAAK,GAAI,IAAI,CAACD,SAAS,CAACC,MAAK;IACpC;EACF,CAAC;EACDC,IAAGA,CAAA,EAAK;IACN,OAAO;MACLC,MAAM,EAAE,CAAC,CAAC;MACVC,KAAK,EAAE,CAAC,CAAC;MACTJ,SAAS,EAAE,CAAC,CAAC;MACbC,MAAM,EAAE;IACV;EACF,CAAC;EACDI,OAAO,EAAE;IACPC,UAASA,CAAGC,SAAS,EAAE;MACrB,MAAMC,GAAE,GAAIC,MAAM,CAACF,SAAS;MAC5B,IAAI,CAACC,GAAE,IAAKE,KAAK,CAACF,GAAG,CAAC,EAAE;QACtB,OAAO,MAAK;MACd;MACA,MAAMG,IAAG,GAAI,IAAIC,IAAI,CAACJ,GAAE,GAAI,IAAI;MAChC,OAAOG,IAAI,CAACE,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;IACxC;EACF,CAAC;EACDC,MAAM,EAAE,CAACtB,UAAU;AACrB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}