{"ast":null,"code":"import modalMixin from '../mixins/modalMixin';\nexport default {\n  props: {\n    product: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    isNew: {\n      type: Boolean,\n      default: true\n    }\n  },\n  watch: {\n    product() {\n      this.tempProduct = this.product;\n    }\n  },\n  data() {\n    return {\n      modal: {},\n      tempProduct: {\n        imagesUrl: []\n      }\n    };\n  },\n  methods: {\n    uploadFile() {\n      const uploadFile = this.$refs.fileInput.files[0];\n      const formData = new FormData();\n      formData.append('file-to-upload', uploadFile);\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/upload`;\n      this.$http.post(url, formData).then(res => {\n        console.log(res.data);\n        if (res.data.success) {\n          this.tempProduct.imageUrl = res.data.imageUrl;\n        }\n      });\n    }\n  },\n  mixins: [modalMixin]\n};","map":{"version":3,"names":["modalMixin","props","product","type","Object","default","isNew","Boolean","watch","tempProduct","data","modal","imagesUrl","methods","uploadFile","$refs","fileInput","files","formData","FormData","append","url","process","env","VUE_APP_API","VUE_APP_PATH","$http","post","then","res","console","log","success","imageUrl","mixins"],"sources":["C:\\Users\\User\\Documents\\GitHub\\final_project\\src\\components\\ProductModal.vue"],"sourcesContent":["<template>\r\n  <!-- Modal -->\r\n<div class=\"modal fade\" id=\"exampleModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" ref=\"modal\">\r\n  <div class=\"modal-dialog modal-xl\" role=\"document\">\r\n    <div class=\"modal-content border-0\">\r\n      <div class=\"modal-header bg-dark text-white\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n            <span>{{ isNew ? '新增產品' : '編輯產品' }}</span>\r\n          </h5>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <div class=\"row\">\r\n            <div class=\"col-sm-4\">\r\n              <div class=\"mb-3\">\r\n                <label for=\"image\" class=\"form-label\">輸入圖片網址</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"image\"\r\n                  v-model=\"tempProduct.imageUrl\" placeholder=\"請輸入圖片連結\"\r\n                />\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"customFile\" class=\"form-label\">或 上傳圖片\r\n                  <i class=\"fas fa-spinner fa-spin\"></i>\r\n                </label>\r\n                <input type=\"file\" id=\"customFile\" class=\"form-control\" ref=\"fileInput\"\r\n                  @change=\"uploadFile\"\r\n                />\r\n              </div>\r\n              <img class=\"img-fluid\" :src=\"tempProduct.imageUrl\" alt=\"\" />\r\n              <!-- 延伸技巧，多圖 -->\r\n              <div class=\"mt-5\" v-if=\"tempProduct.images\">\r\n                <div v-for=\"(image, key) in tempProduct.images\" class=\"mb-3 input-group\" :key=\"key\">\r\n                  <input type=\"url\" class=\"form-control form-control\"\r\n                    v-model=\"tempProduct.images[key]\" placeholder=\"請輸入連結\"\r\n                  />\r\n                  <button type=\"button\" class=\"btn btn-outline-danger\"\r\n                    @click=\"tempProduct.images.splice(key, 1)\"\r\n                  >\r\n                    移除\r\n                  </button>\r\n                </div>\r\n                <div\r\n                  v-if=\"\r\n                    tempProduct.images[tempProduct.images.length - 1] || !tempProduct.images.length\r\n                  \"\r\n                >\r\n                  <button\r\n                    class=\"btn btn-outline-primary btn-sm d-block w-100\"\r\n                    @click=\"tempProduct.images.push('')\"\r\n                  >\r\n                    新增圖片\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-sm-8\">\r\n              <div class=\"mb-3\">\r\n                <label for=\"title\" class=\"form-label\">標題</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"title\"\r\n                  v-model=\"tempProduct.title\" placeholder=\"請輸入標題\"\r\n                />\r\n              </div>\r\n              <div class=\"row gx-2\">\r\n                <div class=\"mb-3 col-md-6\">\r\n                  <label for=\"category\" class=\"form-label\">分類</label>\r\n                  <select class=\"form-select\" id=\"category\" v-model=\"tempProduct.category\">\r\n                    <option disabled value=\"\">請選擇分類</option>\r\n                    <option value=\"主機\">主機</option>\r\n                    <option value=\"遊戲\">遊戲</option>\r\n                    <option value=\"配件\">配件</option>\r\n                  </select>\r\n                </div>\r\n                <div class=\"mb-3 col-md-6\">\r\n                  <label for=\"price\" class=\"form-label\">單位</label>\r\n                  <input type=\"text\" class=\"form-control\" id=\"unit\"\r\n                    v-model=\"tempProduct.unit\" placeholder=\"請輸入單位\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"row gx-2\">\r\n                <div class=\"mb-3 col-md-6\">\r\n                  <label for=\"origin_price\" class=\"form-label\">原價</label>\r\n                  <input type=\"number\" class=\"form-control\" id=\"origin_price\"\r\n                    v-model.number=\"tempProduct.origin_price\" placeholder=\"請輸入原價\"\r\n                  />\r\n                </div>\r\n                <div class=\"mb-3 col-md-6\">\r\n                  <label for=\"price\" class=\"form-label\">售價</label>\r\n                  <input type=\"number\" class=\"form-control\" id=\"price\"\r\n                    v-model.number=\"tempProduct.price\" placeholder=\"請輸入售價\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <hr />\r\n              <div class=\"mb-3\">\r\n                <label for=\"description\" class=\"form-label\">產品介紹影片</label>\r\n                <textarea type=\"text\" class=\"form-control\" id=\"description\"\r\n                  v-model=\"tempProduct.description\" placeholder=\"請輸入產品描述\"\r\n                ></textarea>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"content\" class=\"form-label\">說明內容</label>\r\n                <textarea type=\"text\" class=\"form-control\" id=\"content\"\r\n                  v-model=\"tempProduct.content\" placeholder=\"請輸入產品說明內容\"\r\n                ></textarea>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <div class=\"form-check\">\r\n                  <input class=\"form-check-input\" type=\"checkbox\"\r\n                    v-model=\"tempProduct.is_enabled\" :true-value=\"1\"\r\n                    :false-value=\"0\" id=\"is_enabled\"\r\n                  />\r\n                  <label class=\"form-check-label\" for=\"is_enabled\">\r\n                    是否啟用\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n        <button type=\"button\" class=\"btn btn-primary\"\r\n        @click=\"$emit('update-product', tempProduct)\">Save changes</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport modalMixin from '../mixins/modalMixin'\r\nexport default {\r\n  props: {\r\n    product: {\r\n      type: Object,\r\n      default () { return {} }\r\n    },\r\n    isNew: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  watch: {\r\n    product () {\r\n      this.tempProduct = this.product\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      modal: {},\r\n      tempProduct: {\r\n        imagesUrl: []\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    uploadFile () {\r\n      const uploadFile = this.$refs.fileInput.files[0]\r\n      const formData = new FormData()\r\n      formData.append('file-to-upload', uploadFile)\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/upload`\r\n      this.$http.post(url, formData)\r\n        .then((res) => {\r\n          console.log(res.data)\r\n          if (res.data.success) {\r\n            this.tempProduct.imageUrl = res.data.imageUrl\r\n          }\r\n        })\r\n    }\r\n  },\r\n  mixins: [modalMixin]\r\n}\r\n</script>\r\n"],"mappings":"AAmIA,OAAOA,UAAS,MAAO,sBAAqB;AAC5C,eAAe;EACbC,KAAK,EAAE;IACLC,OAAO,EAAE;MACPC,IAAI,EAAEC,MAAM;MACZC,OAAMA,CAAA,EAAK;QAAE,OAAO,CAAC;MAAE;IACzB,CAAC;IACDC,KAAK,EAAE;MACLH,IAAI,EAAEI,OAAO;MACbF,OAAO,EAAE;IACX;EACF,CAAC;EACDG,KAAK,EAAE;IACLN,OAAMA,CAAA,EAAK;MACT,IAAI,CAACO,WAAU,GAAI,IAAI,CAACP,OAAM;IAChC;EACF,CAAC;EACDQ,IAAGA,CAAA,EAAK;IACN,OAAO;MACLC,KAAK,EAAE,CAAC,CAAC;MACTF,WAAW,EAAE;QACXG,SAAS,EAAE;MACb;IACF;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,UAASA,CAAA,EAAK;MACZ,MAAMA,UAAS,GAAI,IAAI,CAACC,KAAK,CAACC,SAAS,CAACC,KAAK,CAAC,CAAC;MAC/C,MAAMC,QAAO,GAAI,IAAIC,QAAQ,CAAC;MAC9BD,QAAQ,CAACE,MAAM,CAAC,gBAAgB,EAAEN,UAAU;MAC5C,MAAMO,GAAE,GAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,WAAW,OAAOF,OAAO,CAACC,GAAG,CAACE,YAAY,eAAc;MACnF,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,GAAG,EAAEH,QAAQ,EAC1BU,IAAI,CAAEC,GAAG,IAAK;QACbC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACnB,IAAI;QACpB,IAAImB,GAAG,CAACnB,IAAI,CAACsB,OAAO,EAAE;UACpB,IAAI,CAACvB,WAAW,CAACwB,QAAO,GAAIJ,GAAG,CAACnB,IAAI,CAACuB,QAAO;QAC9C;MACF,CAAC;IACL;EACF,CAAC;EACDC,MAAM,EAAE,CAAClC,UAAU;AACrB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}