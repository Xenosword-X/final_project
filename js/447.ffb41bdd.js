"use strict";(self["webpackChunkfinal_project"]=self["webpackChunkfinal_project"]||[]).push([[447],{7447:function(t,e,s){s.r(e),s.d(e,{default:function(){return $}});var r=s(6768),l=s(5130),a=s(4232);const d={class:"my-5 row justify-content-center"},c={class:"row justify-content-center"},o={class:"col-md-6"},n={class:"card shadow-sm mb-4"},i={class:"card-body p-0"},u={class:"table table-hover align-middle mb-0"},k={class:"text-center"},L={class:"text-end"},h={class:"table-light"},p={class:"text-end fw-bold text-danger"},b={class:"row justify-content-center"},v={class:"col-md-6"},y={class:"card shadow-sm mb-4"},m={class:"card-body"},f={class:"table mb-0"},w={key:0,class:"badge bg-warning text-dark"},x={key:1,class:"badge bg-success"},g={class:"text-end"};function _(t,e,s,_,C,I){return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",d,[(0,r.Lk)("form",{class:"col-md-6",onSubmit:e[0]||(e[0]=(0,l.D$)((...t)=>I.payOrder&&I.payOrder(...t),["prevent"]))},e[2]||(e[2]=[(0,r.Lk)("div",{class:"text-center mb-2"},[(0,r.Lk)("h3",{class:"fw-bold text-primary"},[(0,r.Lk)("i",{class:"bi bi-receipt"}),(0,r.eW)(" 訂單明細確認 ")]),(0,r.Lk)("p",{class:"text-muted"},"請再次確認以下資訊後完成付款")],-1)]),32)]),(0,r.Lk)("div",c,[(0,r.Lk)("div",o,[(0,r.Lk)("div",n,[e[5]||(e[5]=(0,r.Lk)("div",{class:"card-header bg-primary text-white fw-bold"},[(0,r.Lk)("i",{class:"bi bi-cart4"}),(0,r.eW)(" 購買商品清單 ")],-1)),(0,r.Lk)("div",i,[(0,r.Lk)("table",u,[e[4]||(e[4]=(0,r.Lk)("thead",{class:"table-light"},[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"品名"),(0,r.Lk)("th",{class:"text-center"},"數量"),(0,r.Lk)("th",{class:"text-end"},"單價")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(C.order.products,e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,(0,a.v_)(e.product.title),1),(0,r.Lk)("td",k,(0,a.v_)(e.qty)+"/"+(0,a.v_)(e.product.unit),1),(0,r.Lk)("td",L,(0,a.v_)(t.$filters.currency(e.final_total)),1)]))),128))]),(0,r.Lk)("tfoot",h,[(0,r.Lk)("tr",null,[e[3]||(e[3]=(0,r.Lk)("td",{colspan:"2",class:"text-end fw-bold"},"總計",-1)),(0,r.Lk)("td",p,(0,a.v_)(t.$filters.currency(C.order.total)),1)])])])])])])]),(0,r.Lk)("div",b,[(0,r.Lk)("div",v,[(0,r.Lk)("div",y,[e[11]||(e[11]=(0,r.Lk)("div",{class:"card-header bg-primary text-white fw-bold"},[(0,r.Lk)("i",{class:"bi bi-person-lines-fill"}),(0,r.eW)(" 收件人資訊 ")],-1)),(0,r.Lk)("div",m,[(0,r.Lk)("table",f,[(0,r.Lk)("tbody",null,[(0,r.Lk)("tr",null,[e[6]||(e[6]=(0,r.Lk)("th",{width:"120"},"Email",-1)),(0,r.Lk)("td",null,(0,a.v_)(C.order.user.email),1)]),(0,r.Lk)("tr",null,[e[7]||(e[7]=(0,r.Lk)("th",null,"姓名",-1)),(0,r.Lk)("td",null,(0,a.v_)(C.order.user.name),1)]),(0,r.Lk)("tr",null,[e[8]||(e[8]=(0,r.Lk)("th",null,"電話",-1)),(0,r.Lk)("td",null,(0,a.v_)(C.order.user.tel),1)]),(0,r.Lk)("tr",null,[e[9]||(e[9]=(0,r.Lk)("th",null,"地址",-1)),(0,r.Lk)("td",null,(0,a.v_)(C.order.user.address),1)]),(0,r.Lk)("tr",null,[e[10]||(e[10]=(0,r.Lk)("th",null,"付款狀態",-1)),(0,r.Lk)("td",null,[C.order.is_paid?((0,r.uX)(),(0,r.CE)("span",x,"付款完成")):((0,r.uX)(),(0,r.CE)("span",w,"尚未付款"))])])])])])]),(0,r.Lk)("div",g,[C.order.is_paid?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("button",{key:0,class:"btn btn-success px-4 py-2",onClick:e[1]||(e[1]=(...t)=>I.payOrder&&I.payOrder(...t))},e[12]||(e[12]=[(0,r.Lk)("i",{class:"bi bi-credit-card"},null,-1),(0,r.eW)(" 確認付款 ")])))])])])],64)}var C={data(){return{order:{user:{}},orderId:"",isLoading:!1}},methods:{getOrder(){const t=`https://vue3-course-api.hexschool.io/v2/api/xenosword-api/order/${this.orderId}`;this.$http.get(t).then(t=>{t.data.success&&(this.order=t.data.order)}).catch(t=>{console.error("API 錯誤：",t),this.showToast("error","資料載入失敗")})},payOrder(){const t=`https://vue3-course-api.hexschool.io/v2/api/xenosword-api/pay/${this.orderId}`;this.$http.post(t).then(t=>{console.log(t),t.data.success&&(this.showToast("success","已成功付款"),this.getOrder())}).catch(t=>{console.error("API 錯誤：",t),this.showToast("error","資料載入失敗")})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},I=s(1241);const O=(0,I.A)(C,[["render",_]]);var $=O}}]);
//# sourceMappingURL=447.ffb41bdd.js.map