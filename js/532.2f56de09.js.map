{"version":3,"file":"js/532.2f56de09.js","mappings":"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","sources":["webpack://final_project/./src/views/UserCartlist.vue","webpack://final_project/./src/stores/productStore.js","webpack://final_project/./src/views/UserCartlist.vue?9786"],"sourcesContent":["<template>\r\n  <div class=\"main-section\">\r\n  <Loading :active=\"isLoading\"></Loading>\r\n  <div class=\"container\">\r\n    <div class=\"row pt-4\">\r\n      <div class=\"col-md-12\">\r\n        <select class=\"form-select mb-3\" aria-label=\"product-category\"\r\n        v-model=\"selectedCategory\">\r\n            <option value=\"\" disabled>請選擇類別</option>\r\n            <option value=\"\">全部</option>\r\n            <option value=\"主機\">主機</option>\r\n            <option value=\"遊戲\">遊戲</option>\r\n            <option value=\"配件\">配件</option>\r\n        </select>\r\n        <div class=\"row row-cols-1 row-cols-md-3 g-4\">\r\n          <div class=\"col\" v-for=\"item in paginatedProducts\" :key=\"item.id\">\r\n            <div class=\"card h-100\">\r\n              <div class=\"card-img-top\"\r\n                :style=\"{\r\n                  height: '400px',\r\n                  backgroundImage: `url(${item.imageUrl})`,\r\n                  backgroundSize: 'cover',\r\n                  backgroundPosition: 'center'\r\n                }\"\r\n              ></div>\r\n              <div class=\"card-body\">\r\n                <h5 class=\"card-title\">{{ item.title }}</h5>\r\n                <p class=\"card-text\">\r\n                  <span v-if=\"!item.price\">{{ item.origin_price }} 元</span>\r\n                  <span v-else>\r\n                    <del class=\"text-muted\">原價 {{ $filters.currency(item.origin_price) }} 元</del><br>\r\n                    <strong class=\"text-danger\">特價 {{ $filters.currency(item.price) }} 元</strong>\r\n                  </span>\r\n                </p>\r\n                <div class=\"d-flex justify-content-between\">\r\n                  <button class=\"btn btn-sm btn-outline-secondary\" @click=\"getProduct(item.id)\">\r\n                    查看更多 <i class=\"bi bi-three-dots\"></i>\r\n                  </button>\r\n                  <button class=\"btn btn-sm btn-outline-danger\" @click=\"addCart(item.id)\"\r\n                  :disabled=\"cartLoadingItem === item.id\">\r\n                    <div v-if=\"cartLoadingItem === item.id\"\r\n                      class=\"spinner-grow text-danger spinner-grow-sm\" role=\"status\">\r\n                      <span class=\"visually-hidden\">Loading...</span>\r\n                    </div>\r\n                    加到購物車 <i class=\"bi bi-bag-fill\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- 商品分頁 -->\r\n        <nav class=\"mt-4\">\r\n          <ul class=\"pagination justify-content-center\">\r\n            <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\r\n              <a class=\"page-link\" href=\"#\" @click.prevent=\"currentPage--\">上一頁</a>\r\n            </li>\r\n            <li\r\n              class=\"page-item\"\r\n              v-for=\"page in totalPages\"\r\n              :key=\"page\"\r\n              :class=\"{ active: currentPage === page }\"\r\n            >\r\n              <a class=\"page-link\" href=\"#\" @click.prevent=\"currentPage = page\">{{ page }}</a>\r\n            </li>\r\n            <li class=\"page-item\" :class=\"{ disabled: currentPage === totalPages }\">\r\n              <a class=\"page-link\" href=\"#\" @click.prevent=\"currentPage++\">下一頁</a>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useProductStore } from '@/stores/productStore'\r\nimport { useCartStore } from '@/stores/cartStore'\r\nimport { useStatusStore } from '@/stores/statusStore'\r\nimport { mapState, mapActions } from 'pinia'\r\nexport default {\r\n  data () {\r\n    return {\r\n      /* product: {}, */\r\n      selectedCategory: '', // 選擇的商品種類\r\n      coupon_code: '',\r\n      currentPage: 1, // 當前頁碼\r\n      perPage: 9 // 每頁顯示幾筆\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(useProductStore, ['products']),\r\n    ...mapState(useCartStore, ['cart']),\r\n    ...mapState(useStatusStore, ['isLoading', 'cartLoadingItem']),\r\n    filteredProducts () { // 商品分類\r\n      if (this.selectedCategory) {\r\n        return this.products.filter(product => product.category === this.selectedCategory)\r\n      }\r\n      return this.products // 如果沒選分類，就顯示全部\r\n    },\r\n    paginatedProducts () { // 規劃出每頁要選染的商品\r\n      const start = (this.currentPage - 1) * this.perPage\r\n      const end = start + this.perPage\r\n      return this.filteredProducts.slice(start, end)\r\n    },\r\n    totalPages () { // 計算總頁數\r\n      return Math.ceil(this.filteredProducts.length / this.perPage)\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(useProductStore, ['getProducts']),\r\n    ...mapActions(useCartStore, ['addCart', 'getCart']),\r\n    getProduct (id) {\r\n      this.$router.push(`/product/${id}`)\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n    this.getCart()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.main-section{\r\n  @include background-color\r\n}\r\n</style>\r\n","import axios from 'axios'\r\nimport { defineStore } from 'pinia'\r\nimport { useStatusStore } from './statusStore'\r\n\r\nexport const useProductStore = defineStore('productStore', {\r\n  state: () => {\r\n    return {\r\n      products: []\r\n    }\r\n  },\r\n  actions: {\r\n    getProducts () {\r\n      const status = useStatusStore()\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      status.isLoading = true\r\n      axios.get(api)\r\n        .then(res => {\r\n          this.products = res.data.products\r\n          status.isLoading = false\r\n        })\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./UserCartlist.vue?vue&type=template&id=d5b490fe&scoped=true\"\nimport script from \"./UserCartlist.vue?vue&type=script&lang=js\"\nexport * from \"./UserCartlist.vue?vue&type=script&lang=js\"\n\nimport \"./UserCartlist.vue?vue&type=style&index=0&id=d5b490fe&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d5b490fe\"]])\n\nexport default __exports__"],"names":["class","role","_createElementBlock","_hoisted_1","_createVNode","_component_Loading","active","_ctx","isLoading","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","$data","selectedCategory","$event","_hoisted_5","_Fragment","_renderList","$options","paginatedProducts","item","key","id","_hoisted_6","style","_normalizeStyle","imageUrl","_hoisted_7","_hoisted_8","_toDisplayString","title","_hoisted_9","price","_hoisted_11","_hoisted_12","$filters","currency","origin_price","_hoisted_13","_hoisted_10","_hoisted_14","onClick","getProduct","addCart","disabled","cartLoadingItem","_hoisted_17","_cache","_hoisted_18","_hoisted_19","_normalizeClass","currentPage","href","_withModifiers","totalPages","page","_hoisted_20","useProductStore","defineStore","state","products","actions","getProducts","status","useStatusStore","api","axios","get","then","res","this","data","coupon_code","perPage","computed","mapState","useCartStore","filteredProducts","filter","product","category","start","end","slice","Math","ceil","length","methods","mapActions","$router","push","created","getCart","__exports__","render"],"sourceRoot":""}