"use strict";(self["webpackChunkfinal_project"]=self["webpackChunkfinal_project"]||[]).push([[30],{9030:function(e,l,s){s.r(l),s.d(l,{default:function(){return A}});var a=s(6768),t=s(4232),r=s(5130);const o={class:"my-5 row justify-content-center"},c={key:0,class:"col-lg-8 col-md-10 col-sm-12 mb-4"},d={class:"table table-hover align-middle border rounded shadow-sm"},i={class:"fw-semibold"},n={key:0,class:"badge bg-success mt-1"},m={class:"text-center"},u={class:"text-dark"},b={class:"text-end text-nowrap"},f={class:"border-top"},k={class:"text-end text-primary fw-semibold"},p={key:0},L={class:"text-end text-success fw-semibold"},h={class:"text-end"},v={key:1,class:"col-md-6 mb-4 text-center display-5 title"},g={class:"text-end"},y={key:0,class:"my-5 row justify-content-center"},x={class:"col-lg-8 col-md-10 col-sm-12"},w={class:"card shadow-sm"},_={class:"card-body"},C={class:"mb-3"},F={class:"mb-3"},V={class:"mb-3"},E={class:"mb-3"},X={class:"mb-3"};function q(e,l,s,q,W,$){const I=(0,a.g2)("Loading"),U=(0,a.g2)("router-link"),j=(0,a.g2)("Field"),Q=(0,a.g2)("ErrorMessage"),A=(0,a.g2)("Form");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(I,{active:e.isLoading},null,8,["active"]),(0,a.Lk)("div",o,[0!==e.cart.carts.length?((0,a.uX)(),(0,a.CE)("div",c,[l[9]||(l[9]=(0,a.Lk)("h5",{class:"fw-bold mb-3"},[(0,a.Lk)("i",{class:"bi bi-bag-check-fill me-2 text-primary"}),(0,a.eW)(" 購買明細 ")],-1)),(0,a.Lk)("table",d,[l[7]||(l[7]=(0,a.Lk)("thead",{class:"table-light"},[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"品名"),(0,a.Lk)("th",{class:"text-center"},"數量"),(0,a.Lk)("th",{class:"text-end"},"單價")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.cart.carts,l=>((0,a.uX)(),(0,a.CE)("tr",{key:l.id},[(0,a.Lk)("td",null,[(0,a.Lk)("div",i,(0,t.v_)(l.product.title),1),l.coupon?((0,a.uX)(),(0,a.CE)("span",n,"已套用優惠券")):(0,a.Q3)("",!0)]),(0,a.Lk)("td",m,[(0,a.Lk)("span",u,(0,t.v_)(l.qty),1)]),(0,a.Lk)("td",b,(0,t.v_)(e.$filters.currency(l.final_total)),1)]))),128))]),(0,a.Lk)("tfoot",f,[(0,a.Lk)("tr",null,[l[5]||(l[5]=(0,a.Lk)("td",{colspan:"2",class:"text-end fw-bold"},"總計",-1)),(0,a.Lk)("td",k,(0,t.v_)(e.$filters.currency(e.cart.total)),1)]),e.cart.final_total!==e.cart.total?((0,a.uX)(),(0,a.CE)("tr",p,[l[6]||(l[6]=(0,a.Lk)("td",{colspan:"2",class:"text-end text-success fw-bold"},"折扣價",-1)),(0,a.Lk)("td",L,(0,t.v_)(e.$filters.currency(e.cart.final_total)),1)])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",h,[(0,a.bF)(U,{to:"/cart",type:"button",class:"btn btn-secondary"},{default:(0,a.k6)(()=>l[8]||(l[8]=[(0,a.eW)("返回商品頁")])),_:1,__:[8]})])])):((0,a.uX)(),(0,a.CE)("div",v,[l[11]||(l[11]=(0,a.eW)(" 購物車為空，請返回商品頁選購 ")),(0,a.Lk)("div",g,[(0,a.bF)(U,{to:"/cart",type:"button",class:"btn btn-secondary"},{default:(0,a.k6)(()=>l[10]||(l[10]=[(0,a.eW)("返回商品頁")])),_:1,__:[10]})])]))]),0!==e.cart.carts.length?((0,a.uX)(),(0,a.CE)("div",y,[(0,a.Lk)("div",x,[(0,a.Lk)("div",w,[l[18]||(l[18]=(0,a.Lk)("div",{class:"card-header bg-primary text-white fw-bold fs-5 d-flex align-items-center"},[(0,a.Lk)("i",{class:"bi bi-pencil-square me-2"}),(0,a.eW)(" 填寫寄送資料 ")],-1)),(0,a.Lk)("div",_,[(0,a.bF)(A,{onSubmit:$.createOrder},{default:(0,a.k6)(({errors:e})=>[(0,a.Lk)("div",C,[l[12]||(l[12]=(0,a.Lk)("label",{for:"email",class:"form-label fw-semibold"},"Email",-1)),(0,a.bF)(j,{id:"email",name:"email",type:"email",class:(0,t.C4)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:W.form.user.email,"onUpdate:modelValue":l[0]||(l[0]=e=>W.form.user.email=e)},null,8,["class","modelValue"]),(0,a.bF)(Q,{name:"email",class:"invalid-feedback"})]),(0,a.Lk)("div",F,[l[13]||(l[13]=(0,a.Lk)("label",{for:"name",class:"form-label fw-semibold"},"收件人姓名",-1)),(0,a.bF)(j,{id:"name",name:"姓名",type:"text",class:(0,t.C4)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:W.form.user.name,"onUpdate:modelValue":l[1]||(l[1]=e=>W.form.user.name=e)},null,8,["class","modelValue"]),(0,a.bF)(Q,{name:"姓名",class:"invalid-feedback"})]),(0,a.Lk)("div",V,[l[14]||(l[14]=(0,a.Lk)("label",{for:"tel",class:"form-label fw-semibold"},"收件人電話",-1)),(0,a.bF)(j,{id:"tel",name:"電話",type:"tel",class:(0,t.C4)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:W.form.user.tel,"onUpdate:modelValue":l[2]||(l[2]=e=>W.form.user.tel=e)},null,8,["class","modelValue"]),(0,a.bF)(Q,{name:"電話",class:"invalid-feedback"})]),(0,a.Lk)("div",E,[l[15]||(l[15]=(0,a.Lk)("label",{for:"address",class:"form-label fw-semibold"},"收件人地址",-1)),(0,a.bF)(j,{id:"address",name:"地址",type:"text",class:(0,t.C4)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:W.form.user.address,"onUpdate:modelValue":l[3]||(l[3]=e=>W.form.user.address=e)},null,8,["class","modelValue"]),(0,a.bF)(Q,{name:"地址",class:"invalid-feedback"})]),(0,a.Lk)("div",X,[l[16]||(l[16]=(0,a.Lk)("label",{for:"message",class:"form-label fw-semibold"},"留言 (選填)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"message",class:"form-control",rows:"4",placeholder:"可輸入備註或希望的配送時間","onUpdate:modelValue":l[4]||(l[4]=e=>W.form.message=e)},null,512),[[r.Jo,W.form.message]])]),l[17]||(l[17]=(0,a.Lk)("div",{class:"text-end"},[(0,a.Lk)("button",{class:"btn btn-primary px-4 py-2"},[(0,a.Lk)("i",{class:"bi bi-send-fill me-1"}),(0,a.eW)(" 送出訂單 ")])],-1))]),_:1,__:[17]},8,["onSubmit"])])])])])):(0,a.Q3)("",!0)],64)}s(4114);var W=s(7649),$=s(4161),I=s(2261),U={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},computed:{...(0,I.aH)(W.x,["cart"]),...(0,I.aH)($.X,["isLoading","cartLoadingItem"])},methods:{...(0,I.i0)(W.x,["getCart"]),createOrder(){const e="https://vue3-course-api.hexschool.io/v2/api/xenosword-api/order",l=this.form;this.isLoading=!0,this.$http.post(e,{data:l}).then(e=>{console.log(e),this.showToast("success","已送出訂單");const l=e.data.orderId;this.$router.push(`/user/checkout/${l}`)}).catch(e=>{console.error("API 錯誤：",e),this.showToast("error","資料新增失敗")})}},created(){this.getCart()}},j=s(1241);const Q=(0,j.A)(U,[["render",q],["__scopeId","data-v-5957eef6"]]);var A=Q}}]);
//# sourceMappingURL=30.8b352838.js.map