{"version":3,"file":"js/447.ffb41bdd.js","mappings":"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","sources":["webpack://final_project/./src/frontend/views/UserCheckout.vue","webpack://final_project/./src/frontend/views/UserCheckout.vue?b126"],"sourcesContent":["<template>\r\n  <div class=\"my-5 row justify-content-center\">\r\n    <form class=\"col-md-6\" @submit.prevent=\"payOrder\">\r\n      <!-- 標題 -->\r\n      <div class=\"text-center mb-2\">\r\n        <h3 class=\"fw-bold text-primary\">\r\n          <i class=\"bi bi-receipt\"></i> 訂單明細確認\r\n        </h3>\r\n        <p class=\"text-muted\">請再次確認以下資訊後完成付款</p>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  <!-- 購買清單 -->\r\n  <div class=\"row justify-content-center\">\r\n    <div class=\"col-md-6\">\r\n      <div class=\"card shadow-sm mb-4\">\r\n        <div class=\"card-header bg-primary text-white fw-bold\">\r\n          <i class=\"bi bi-cart4\"></i> 購買商品清單\r\n        </div>\r\n        <div class=\"card-body p-0\">\r\n          <table class=\"table table-hover align-middle mb-0\">\r\n            <thead class=\"table-light\">\r\n              <tr>\r\n                <th>品名</th>\r\n                <th class=\"text-center\">數量</th>\r\n                <th class=\"text-end\">單價</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"item in order.products\" :key=\"item.id\">\r\n                <td>{{ item.product.title }}</td>\r\n                <td class=\"text-center\">{{ item.qty }}/{{ item.product.unit }}</td>\r\n                <td class=\"text-end\">{{ $filters.currency(item.final_total) }}</td>\r\n              </tr>\r\n            </tbody>\r\n            <tfoot class=\"table-light\">\r\n              <tr>\r\n                <td colspan=\"2\" class=\"text-end fw-bold\">總計</td>\r\n                <td class=\"text-end fw-bold text-danger\">{{ $filters.currency(order.total) }}</td>\r\n              </tr>\r\n            </tfoot>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- 收件人資訊 -->\r\n  <div class=\"row justify-content-center\">\r\n    <div class=\"col-md-6\">\r\n      <div class=\"card shadow-sm mb-4\">\r\n        <div class=\"card-header bg-primary text-white fw-bold\">\r\n          <i class=\"bi bi-person-lines-fill\"></i> 收件人資訊\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <table class=\"table mb-0\">\r\n            <tbody>\r\n              <tr>\r\n                <th width=\"120\">Email</th>\r\n                <td>{{ order.user.email }}</td>\r\n              </tr>\r\n              <tr>\r\n                <th>姓名</th>\r\n                <td>{{ order.user.name }}</td>\r\n              </tr>\r\n              <tr>\r\n                <th>電話</th>\r\n                <td>{{ order.user.tel }}</td>\r\n              </tr>\r\n              <tr>\r\n                <th>地址</th>\r\n                <td>{{ order.user.address }}</td>\r\n              </tr>\r\n              <tr>\r\n                <th>付款狀態</th>\r\n                <td>\r\n                  <span v-if=\"!order.is_paid\" class=\"badge bg-warning text-dark\">尚未付款</span>\r\n                  <span v-else class=\"badge bg-success\">付款完成</span>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n      <!-- 付款按鈕 -->\r\n      <div class=\"text-end\">\r\n        <button v-if=\"!order.is_paid\" class=\"btn btn-success px-4 py-2\" @click=\"payOrder\">\r\n          <i class=\"bi bi-credit-card\"></i> 確認付款\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      order: {\r\n        user: {}\r\n      },\r\n      orderId: '',\r\n      isLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    getOrder () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${this.orderId}`\r\n      this.$http.get(url)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.order = res.data.order\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.error('API 錯誤：', err)\r\n          this.showToast('error', '資料載入失敗')\r\n        })\r\n    },\r\n    payOrder () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${this.orderId}`\r\n      this.$http.post(url)\r\n        .then((res) => {\r\n          console.log(res)\r\n          if (res.data.success) {\r\n            this.showToast('success', '已成功付款')\r\n            this.getOrder()\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.error('API 錯誤：', err)\r\n          this.showToast('error', '資料載入失敗')\r\n        })\r\n    }\r\n  },\r\n  created () {\r\n    this.orderId = this.$route.params.orderId\r\n    this.getOrder()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./UserCheckout.vue?vue&type=template&id=946f975a\"\nimport script from \"./UserCheckout.vue?vue&type=script&lang=js\"\nexport * from \"./UserCheckout.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_1","onSubmit","_cache","_withModifiers","args","$options","payOrder","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_createElementBlock","_Fragment","_renderList","$data","order","products","item","key","id","_toDisplayString","product","title","_hoisted_7","qty","unit","_hoisted_8","_ctx","$filters","currency","final_total","_hoisted_9","colspan","_hoisted_10","total","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","width","user","email","name","tel","address","is_paid","_hoisted_17","_hoisted_16","_hoisted_18","onClick","data","orderId","isLoading","methods","getOrder","url","this","$http","get","then","res","success","catch","err","console","error","showToast","post","log","created","$route","params","__exports__","render"],"sourceRoot":""}