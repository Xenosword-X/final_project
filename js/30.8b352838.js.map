{"version":3,"file":"js/30.8b352838.js","mappings":"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","sources":["webpack://final_project/./src/frontend/views/UserForm.vue","webpack://final_project/./src/frontend/views/UserForm.vue?aa3f"],"sourcesContent":["<template>\r\n<Loading :active=\"isLoading\"></Loading>\r\n<div class=\"my-5 row justify-content-center\">\r\n  <div class=\"col-lg-8 col-md-10 col-sm-12 mb-4\" v-if=\"cart.carts.length !== 0\">\r\n    <h5 class=\"fw-bold mb-3\">\r\n      <i class=\"bi bi-bag-check-fill me-2 text-primary\"></i> 購買明細\r\n    </h5>\r\n    <table class=\"table table-hover align-middle border rounded shadow-sm\">\r\n      <thead class=\"table-light\">\r\n        <tr>\r\n          <th>品名</th>\r\n          <th class=\"text-center\">數量</th>\r\n          <th class=\"text-end\">單價</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"item in cart.carts\" :key=\"item.id\">\r\n          <td>\r\n            <div class=\"fw-semibold\">{{ item.product.title }}</div>\r\n            <span v-if=\"item.coupon\" class=\"badge bg-success mt-1\">已套用優惠券</span>\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <span class=\"text-dark\">{{ item.qty }}</span>\r\n          </td>\r\n          <td class=\"text-end text-nowrap\">\r\n            {{ $filters.currency(item.final_total) }}\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n      <tfoot class=\"border-top\">\r\n        <tr>\r\n          <td colspan=\"2\" class=\"text-end fw-bold\">總計</td>\r\n          <td class=\"text-end text-primary fw-semibold\">{{ $filters.currency(cart.total) }}</td>\r\n        </tr>\r\n        <tr v-if=\"cart.final_total !== cart.total\">\r\n          <td colspan=\"2\" class=\"text-end text-success fw-bold\">折扣價</td>\r\n          <td class=\"text-end text-success fw-semibold\">{{ $filters.currency(cart.final_total) }}</td>\r\n        </tr>\r\n      </tfoot>\r\n    </table>\r\n    <div class=\"text-end\">\r\n      <router-link to=\"/cart\" type=\"button\" class=\"btn btn-secondary\">返回商品頁</router-link>\r\n    </div>\r\n  </div>\r\n  <div class=\"col-md-6 mb-4 text-center display-5 title\" v-else>\r\n    購物車為空，請返回商品頁選購\r\n    <div class=\"text-end\">\r\n      <router-link to=\"/cart\" type=\"button\" class=\"btn btn-secondary\">返回商品頁</router-link>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class=\"my-5 row justify-content-center\" v-if=\"cart.carts.length !== 0\">\r\n  <div class=\"col-lg-8 col-md-10 col-sm-12\">\r\n    <div class=\"card shadow-sm\">\r\n      <div class=\"card-header bg-primary text-white fw-bold fs-5 d-flex align-items-center\">\r\n        <i class=\"bi bi-pencil-square me-2\"></i> 填寫寄送資料\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <Form v-slot=\"{ errors }\" @submit=\"createOrder\">\r\n          <!-- Email -->\r\n          <div class=\"mb-3\">\r\n            <label for=\"email\" class=\"form-label fw-semibold\">Email</label>\r\n            <Field id=\"email\" name=\"email\" type=\"email\" class=\"form-control\"\r\n              :class=\"{ 'is-invalid': errors['email'] }\" placeholder=\"請輸入 Email\"\r\n              rules=\"email|required\" v-model=\"form.user.email\"\r\n            />\r\n            <ErrorMessage name=\"email\" class=\"invalid-feedback\" />\r\n          </div>\r\n          <!-- 姓名 -->\r\n          <div class=\"mb-3\">\r\n            <label for=\"name\" class=\"form-label fw-semibold\">收件人姓名</label>\r\n            <Field id=\"name\" name=\"姓名\" type=\"text\" class=\"form-control\"\r\n              :class=\"{ 'is-invalid': errors['姓名'] }\" placeholder=\"請輸入姓名\"\r\n              rules=\"required\" v-model=\"form.user.name\"\r\n            />\r\n            <ErrorMessage name=\"姓名\" class=\"invalid-feedback\" />\r\n          </div>\r\n          <!-- 電話 -->\r\n          <div class=\"mb-3\">\r\n            <label for=\"tel\" class=\"form-label fw-semibold\">收件人電話</label>\r\n            <Field id=\"tel\" name=\"電話\" type=\"tel\" class=\"form-control\"\r\n              :class=\"{ 'is-invalid': errors['電話'] }\" placeholder=\"請輸入電話\"\r\n              rules=\"required\" v-model=\"form.user.tel\"\r\n            />\r\n            <ErrorMessage name=\"電話\" class=\"invalid-feedback\" />\r\n          </div>\r\n          <!-- 地址 -->\r\n          <div class=\"mb-3\">\r\n            <label for=\"address\" class=\"form-label fw-semibold\">收件人地址</label>\r\n            <Field id=\"address\" name=\"地址\" type=\"text\" class=\"form-control\"\r\n              :class=\"{ 'is-invalid': errors['地址'] }\" placeholder=\"請輸入地址\"\r\n              rules=\"required\" v-model=\"form.user.address\"\r\n            />\r\n            <ErrorMessage name=\"地址\" class=\"invalid-feedback\" />\r\n          </div>\r\n          <!-- 留言 -->\r\n          <div class=\"mb-3\">\r\n            <label for=\"message\" class=\"form-label fw-semibold\">留言 (選填)</label>\r\n            <textarea id=\"message\" class=\"form-control\" rows=\"4\"\r\n              placeholder=\"可輸入備註或希望的配送時間\" v-model=\"form.message\"></textarea>\r\n          </div>\r\n          <!-- 送出按鈕 -->\r\n          <div class=\"text-end\">\r\n            <button class=\"btn btn-primary px-4 py-2\">\r\n              <i class=\"bi bi-send-fill me-1\"></i> 送出訂單\r\n            </button>\r\n          </div>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { useCartStore } from '@/stores/cartStore'\r\nimport { useStatusStore } from '@/stores/statusStore'\r\nimport { mapState, mapActions } from 'pinia'\r\nexport default {\r\n  data () {\r\n    return {\r\n      form: {\r\n        user: {\r\n          name: '',\r\n          email: '',\r\n          tel: '',\r\n          address: ''\r\n        },\r\n        message: ''\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(useCartStore, ['cart']),\r\n    ...mapState(useStatusStore, ['isLoading', 'cartLoadingItem'])\r\n  },\r\n  methods: {\r\n    ...mapActions(useCartStore, ['getCart']),\r\n    createOrder () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`\r\n      const order = this.form\r\n      this.isLoading = true\r\n      this.$http.post(api, { data: order })\r\n        .then(res => {\r\n          console.log(res)\r\n          this.showToast('success', '已送出訂單')\r\n          const orderId = res.data.orderId\r\n          this.$router.push(`/user/checkout/${orderId}`)\r\n        })\r\n        .catch((err) => {\r\n          console.error('API 錯誤：', err)\r\n          this.showToast('error', '資料新增失敗')\r\n        })\r\n    }\r\n  },\r\n  created () {\r\n    this.getCart()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.title{\r\n  @include custom-title-style\r\n}\r\n</style>\r\n","import { render } from \"./UserForm.vue?vue&type=template&id=5957eef6&scoped=true\"\nimport script from \"./UserForm.vue?vue&type=script&lang=js\"\nexport * from \"./UserForm.vue?vue&type=script&lang=js\"\n\nimport \"./UserForm.vue?vue&type=style&index=0&id=5957eef6&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5957eef6\"]])\n\nexport default __exports__"],"names":["class","_createVNode","_component_Loading","active","_ctx","isLoading","_createElementVNode","_hoisted_1","cart","carts","length","_createElementBlock","_hoisted_2","_hoisted_3","_Fragment","_renderList","item","key","id","_hoisted_4","_toDisplayString","product","title","coupon","_hoisted_5","_hoisted_6","_hoisted_7","qty","_hoisted_8","$filters","currency","final_total","_hoisted_9","colspan","_hoisted_10","total","_hoisted_11","_hoisted_12","_hoisted_13","_component_router_link","to","type","_cache","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_component_Form","onSubmit","$options","createOrder","errors","_hoisted_20","for","_component_Field","name","_normalizeClass","placeholder","rules","$data","form","user","email","$event","_component_ErrorMessage","_hoisted_21","_hoisted_22","tel","_hoisted_23","address","_hoisted_24","rows","message","data","computed","mapState","useCartStore","useStatusStore","methods","mapActions","api","order","this","$http","post","then","res","console","log","showToast","orderId","$router","push","catch","err","error","created","getCart","__exports__","render"],"sourceRoot":""}